-- phpMyAdmin SQL Dump
-- version 4.9.0.1
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 19-09-2019 a las 19:46:07
-- Versión del servidor: 10.3.16-MariaDB
-- Versión de PHP: 7.3.7

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `bicisoft`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `carreras`
--

CREATE TABLE `carreras` (
  `id` int(11) NOT NULL,
  `nombre` varchar(50) NOT NULL,
  `id_tipo` int(11) NOT NULL,
  `fecha` date NOT NULL,
  `terminada` tinyint(1) NOT NULL DEFAULT 0,
  `empezada` tinyint(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `carreras`
--

INSERT INTO `carreras` (`id`, `nombre`, `id_tipo`, `fecha`, `terminada`, `empezada`) VALUES
(1, 'VUELTA RIO GRANDE', 1, '2019-08-17', 0, 1),
(2, 'TRIATLON', 3, '2019-10-25', 0, 1);

-- --------------------------------------------------------

--
-- Estructura Stand-in para la vista `carreras_no_finalizadas_view`
-- (Véase abajo para la vista actual)
--
CREATE TABLE `carreras_no_finalizadas_view` (
`id` int(11)
,`nombre` varchar(50)
,`id_tipo` int(11)
,`fecha` date
,`terminada` tinyint(1)
,`descripcion` varchar(50)
);

-- --------------------------------------------------------

--
-- Estructura Stand-in para la vista `carreras_view`
-- (Véase abajo para la vista actual)
--
CREATE TABLE `carreras_view` (
`id` int(11)
,`nombre` varchar(50)
,`id_tipo` int(11)
,`fecha` date
,`terminada` tinyint(1)
,`descripcion` varchar(50)
);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `carrera_corredores`
--

CREATE TABLE `carrera_corredores` (
  `id_carrera` int(11) NOT NULL,
  `id_corredor` int(11) NOT NULL,
  `numero` int(11) NOT NULL,
  `tiempo` time NOT NULL DEFAULT '00:00:00',
  `vueltas` int(5) NOT NULL DEFAULT 0,
  `posicion` int(5) NOT NULL DEFAULT 0,
  `global` int(5) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `carrera_corredores`
--

INSERT INTO `carrera_corredores` (`id_carrera`, `id_corredor`, `numero`, `tiempo`, `vueltas`, `posicion`, `global`) VALUES
(1, 4157855, 1, '142:41:53', 36, 1, 3),
(1, 22145547, 2, '142:55:40', 37, 2, 2),
(1, 31376213, 3, '142:55:21', 39, 1, 1),
(2, 4157855, 3, '70:38:38', 7, 1, 1),
(2, 22145547, 2, '70:38:37', 3, 1, 2),
(2, 31376213, 1, '74:21:42', 3, 2, 3);

-- --------------------------------------------------------

--
-- Estructura Stand-in para la vista `carrera_corredor_view`
-- (Véase abajo para la vista actual)
--
CREATE TABLE `carrera_corredor_view` (
`documento` int(11)
,`numero` int(11)
,`nombre` varchar(30)
,`apellido` varchar(30)
,`categoria` varchar(50)
,`posicion` int(5)
,`tiempo` time
,`vueltas` int(5)
,`global` int(5)
,`id_carrera` int(11)
,`id_categoria` int(11)
);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `carrera_marcas`
--

CREATE TABLE `carrera_marcas` (
  `id_carrera` int(11) NOT NULL,
  `numero_corredor` int(11) NOT NULL,
  `marca` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `carrera_marcas`
--

INSERT INTO `carrera_marcas` (`id_carrera`, `numero_corredor`, `marca`) VALUES
(1, 1, '2019-09-13 13:16:16'),
(1, 1, '2019-09-13 13:16:18'),
(1, 1, '2019-09-13 13:16:20'),
(1, 1, '2019-09-13 13:16:22'),
(1, 1, '2019-09-13 13:16:29'),
(1, 1, '2019-09-13 13:17:11'),
(1, 1, '2019-09-13 13:43:26'),
(1, 1, '2019-09-13 13:43:34'),
(1, 1, '2019-09-13 13:43:35'),
(1, 1, '2019-09-13 13:43:36'),
(1, 1, '2019-09-13 13:43:46'),
(1, 1, '2019-09-13 13:43:48'),
(1, 1, '2019-09-13 13:43:52'),
(1, 1, '2019-09-13 13:44:32'),
(1, 1, '2019-09-13 13:44:33'),
(1, 1, '2019-09-13 13:55:44'),
(1, 1, '2019-09-13 13:55:45'),
(1, 1, '2019-09-13 13:55:46'),
(1, 1, '2019-09-13 13:55:47'),
(1, 1, '2019-09-13 13:56:10'),
(1, 1, '2019-09-13 14:22:47'),
(1, 1, '2019-09-13 14:22:50'),
(1, 1, '2019-09-13 14:22:54'),
(1, 1, '2019-09-13 14:22:55'),
(1, 1, '2019-09-13 14:33:26'),
(1, 1, '2019-09-13 14:33:48'),
(1, 1, '2019-09-13 14:33:52'),
(1, 1, '2019-09-13 14:33:53'),
(1, 1, '2019-09-13 14:42:12'),
(1, 1, '2019-09-13 14:45:44'),
(1, 1, '2019-09-13 14:47:01'),
(1, 1, '2019-09-13 14:48:08'),
(1, 1, '2019-09-13 14:48:54'),
(1, 1, '2019-09-13 14:52:09'),
(1, 1, '2019-09-13 14:52:13'),
(1, 1, '2019-09-16 07:35:27'),
(1, 1, '2019-09-16 07:35:29'),
(1, 1, '2019-09-16 07:35:30'),
(1, 1, '2019-09-16 07:35:35'),
(1, 1, '2019-09-16 07:35:42'),
(1, 1, '2019-09-16 07:35:51'),
(1, 1, '2019-09-16 07:35:55'),
(1, 1, '2019-09-16 07:36:02'),
(1, 1, '2019-09-16 07:36:03'),
(1, 1, '2019-09-16 07:36:04'),
(1, 1, '2019-09-16 07:36:08'),
(1, 1, '2019-09-16 07:36:09'),
(1, 1, '2019-09-16 07:36:10'),
(1, 1, '2019-09-16 07:36:16'),
(1, 1, '2019-09-16 07:36:17'),
(1, 1, '2019-09-16 07:36:18'),
(1, 1, '2019-09-16 09:53:34'),
(1, 1, '2019-09-16 09:53:35'),
(1, 1, '2019-09-16 09:53:37'),
(1, 1, '2019-09-16 09:53:39'),
(1, 1, '2019-09-16 09:53:40'),
(1, 1, '2019-09-16 09:53:41'),
(1, 1, '2019-09-16 09:53:42'),
(1, 1, '2019-09-16 10:00:03'),
(1, 1, '2019-09-16 10:00:04'),
(1, 1, '2019-09-16 10:00:05'),
(1, 1, '2019-09-16 10:00:06'),
(1, 1, '2019-09-16 10:00:07'),
(1, 1, '2019-09-16 13:34:15'),
(1, 1, '2019-09-16 13:35:18'),
(1, 1, '2019-09-16 13:37:48'),
(1, 1, '2019-09-16 13:37:49'),
(1, 1, '2019-09-16 13:37:57'),
(1, 1, '2019-09-16 13:37:58'),
(1, 1, '2019-09-16 13:40:35'),
(1, 1, '2019-09-16 13:41:36'),
(1, 1, '2019-09-16 13:41:38'),
(1, 1, '2019-09-16 13:41:39'),
(1, 1, '2019-09-16 13:41:50'),
(1, 1, '2019-09-16 13:41:51'),
(1, 1, '2019-09-16 13:45:36'),
(1, 1, '2019-09-17 06:10:12'),
(1, 1, '2019-09-17 06:10:16'),
(1, 1, '2019-09-17 06:10:26'),
(1, 1, '2019-09-17 06:10:39'),
(1, 1, '2019-09-17 06:16:29'),
(1, 1, '2019-09-17 10:05:48'),
(1, 1, '2019-09-17 10:13:33'),
(1, 1, '2019-09-17 10:13:35'),
(1, 1, '2019-09-17 10:13:37'),
(1, 1, '2019-09-17 10:13:41'),
(1, 1, '2019-09-17 10:13:44'),
(1, 1, '2019-09-17 10:13:48'),
(1, 1, '2019-09-17 10:13:52'),
(1, 1, '2019-09-17 10:13:53'),
(1, 1, '2019-09-17 10:13:54'),
(1, 1, '2019-09-17 10:13:57'),
(1, 1, '2019-09-17 10:17:49'),
(1, 1, '2019-09-17 11:05:38'),
(1, 1, '2019-09-17 11:05:40'),
(1, 1, '2019-09-17 11:05:42'),
(1, 1, '2019-09-17 11:18:35'),
(1, 1, '2019-09-17 11:18:38'),
(1, 1, '2019-09-17 11:18:44'),
(1, 1, '2019-09-17 14:36:28'),
(1, 1, '2019-09-17 14:36:30'),
(1, 1, '2019-09-17 14:36:31'),
(1, 1, '2019-09-17 14:36:33'),
(1, 1, '2019-09-17 14:36:48'),
(1, 1, '2019-09-17 14:37:18'),
(1, 1, '2019-09-17 14:37:27'),
(1, 1, '2019-09-17 14:37:31'),
(1, 1, '2019-09-19 07:38:18'),
(1, 1, '2019-09-19 07:38:20'),
(1, 1, '2019-09-19 07:42:17'),
(1, 1, '2019-09-19 11:54:07'),
(1, 1, '2019-09-19 11:57:57'),
(1, 1, '2019-09-19 11:58:09'),
(1, 2, '2019-09-13 13:16:26'),
(1, 2, '2019-09-13 13:16:31'),
(1, 2, '2019-09-13 13:43:37'),
(1, 2, '2019-09-13 13:43:42'),
(1, 2, '2019-09-13 13:43:43'),
(1, 2, '2019-09-13 13:43:45'),
(1, 2, '2019-09-13 13:43:47'),
(1, 2, '2019-09-13 13:43:49'),
(1, 2, '2019-09-13 13:43:50'),
(1, 2, '2019-09-13 13:44:34'),
(1, 2, '2019-09-13 13:55:14'),
(1, 2, '2019-09-13 13:55:18'),
(1, 2, '2019-09-13 13:55:26'),
(1, 2, '2019-09-13 13:55:50'),
(1, 2, '2019-09-13 13:55:51'),
(1, 2, '2019-09-13 13:55:52'),
(1, 2, '2019-09-13 13:55:53'),
(1, 2, '2019-09-13 14:22:48'),
(1, 2, '2019-09-13 14:33:31'),
(1, 2, '2019-09-13 14:33:38'),
(1, 2, '2019-09-13 14:33:39'),
(1, 2, '2019-09-13 14:33:44'),
(1, 2, '2019-09-13 14:33:46'),
(1, 2, '2019-09-13 14:33:47'),
(1, 2, '2019-09-13 14:34:47'),
(1, 2, '2019-09-13 14:36:09'),
(1, 2, '2019-09-13 14:42:13'),
(1, 2, '2019-09-13 14:45:45'),
(1, 2, '2019-09-13 14:47:02'),
(1, 2, '2019-09-13 14:48:09'),
(1, 2, '2019-09-13 14:48:55'),
(1, 2, '2019-09-13 14:49:08'),
(1, 2, '2019-09-13 14:49:11'),
(1, 2, '2019-09-13 14:52:14'),
(1, 2, '2019-09-13 14:52:15'),
(1, 2, '2019-09-16 07:35:34'),
(1, 2, '2019-09-16 07:35:36'),
(1, 2, '2019-09-16 07:35:40'),
(1, 2, '2019-09-16 07:35:43'),
(1, 2, '2019-09-16 07:35:51'),
(1, 2, '2019-09-16 07:35:57'),
(1, 2, '2019-09-16 07:36:05'),
(1, 2, '2019-09-16 07:36:11'),
(1, 2, '2019-09-16 07:36:13'),
(1, 2, '2019-09-16 07:36:14'),
(1, 2, '2019-09-16 09:53:43'),
(1, 2, '2019-09-16 09:53:44'),
(1, 2, '2019-09-16 13:34:15'),
(1, 2, '2019-09-16 13:41:36'),
(1, 2, '2019-09-17 06:10:12'),
(1, 2, '2019-09-17 10:05:49'),
(1, 2, '2019-09-17 10:13:36'),
(1, 2, '2019-09-17 10:13:42'),
(1, 2, '2019-09-17 10:13:44'),
(1, 2, '2019-09-17 10:13:49'),
(1, 2, '2019-09-17 10:13:55'),
(1, 2, '2019-09-17 10:13:59'),
(1, 2, '2019-09-17 11:05:36'),
(1, 2, '2019-09-17 11:05:44'),
(1, 2, '2019-09-17 11:18:36'),
(1, 2, '2019-09-17 11:18:43'),
(1, 2, '2019-09-17 13:45:45'),
(1, 2, '2019-09-17 13:45:46'),
(1, 2, '2019-09-17 13:45:47'),
(1, 2, '2019-09-17 13:45:48'),
(1, 2, '2019-09-17 13:45:49'),
(1, 2, '2019-09-17 13:45:50'),
(1, 2, '2019-09-17 13:45:51'),
(1, 2, '2019-09-17 13:45:52'),
(1, 2, '2019-09-17 13:45:53'),
(1, 2, '2019-09-17 13:45:54'),
(1, 2, '2019-09-17 13:45:55'),
(1, 2, '2019-09-17 13:45:56'),
(1, 2, '2019-09-17 13:45:57'),
(1, 2, '2019-09-17 13:45:58'),
(1, 2, '2019-09-17 13:45:59'),
(1, 2, '2019-09-17 14:37:28'),
(1, 2, '2019-09-17 14:37:33'),
(1, 2, '2019-09-17 14:37:34'),
(1, 2, '2019-09-19 07:38:22'),
(1, 2, '2019-09-19 12:11:55'),
(1, 2, '2019-09-19 12:11:57'),
(1, 2, '2019-09-19 12:11:58'),
(1, 2, '2019-09-19 12:11:59'),
(1, 2, '2019-09-19 12:12:00'),
(1, 2, '2019-09-19 12:12:03'),
(1, 2, '2019-09-19 12:12:06'),
(1, 3, '2019-09-13 13:16:28'),
(1, 3, '2019-09-13 13:16:32'),
(1, 3, '2019-09-13 13:43:38'),
(1, 3, '2019-09-13 13:43:44'),
(1, 3, '2019-09-13 13:43:45'),
(1, 3, '2019-09-13 13:43:48'),
(1, 3, '2019-09-13 13:43:50'),
(1, 3, '2019-09-13 13:43:51'),
(1, 3, '2019-09-13 13:44:35'),
(1, 3, '2019-09-13 13:54:37'),
(1, 3, '2019-09-13 13:54:39'),
(1, 3, '2019-09-13 13:54:40'),
(1, 3, '2019-09-13 13:54:41'),
(1, 3, '2019-09-13 13:54:42'),
(1, 3, '2019-09-13 13:54:43'),
(1, 3, '2019-09-13 13:54:44'),
(1, 3, '2019-09-13 13:54:45'),
(1, 3, '2019-09-13 13:54:47'),
(1, 3, '2019-09-13 13:55:21'),
(1, 3, '2019-09-13 13:55:27'),
(1, 3, '2019-09-13 13:55:55'),
(1, 3, '2019-09-13 13:55:56'),
(1, 3, '2019-09-13 13:55:57'),
(1, 3, '2019-09-13 13:55:58'),
(1, 3, '2019-09-13 13:55:59'),
(1, 3, '2019-09-13 14:22:49'),
(1, 3, '2019-09-13 14:33:32'),
(1, 3, '2019-09-13 14:34:53'),
(1, 3, '2019-09-13 14:38:34'),
(1, 3, '2019-09-13 14:38:35'),
(1, 3, '2019-09-13 14:38:36'),
(1, 3, '2019-09-13 14:42:13'),
(1, 3, '2019-09-13 14:42:22'),
(1, 3, '2019-09-13 14:42:24'),
(1, 3, '2019-09-13 14:42:27'),
(1, 3, '2019-09-13 14:45:46'),
(1, 3, '2019-09-13 14:47:03'),
(1, 3, '2019-09-13 14:48:09'),
(1, 3, '2019-09-13 14:48:56'),
(1, 3, '2019-09-13 14:52:07'),
(1, 3, '2019-09-13 14:52:08'),
(1, 3, '2019-09-13 14:52:18'),
(1, 3, '2019-09-13 14:52:20'),
(1, 3, '2019-09-16 07:35:32'),
(1, 3, '2019-09-16 07:35:38'),
(1, 3, '2019-09-16 07:35:45'),
(1, 3, '2019-09-16 07:35:47'),
(1, 3, '2019-09-16 07:35:49'),
(1, 3, '2019-09-16 07:35:50'),
(1, 3, '2019-09-16 07:35:52'),
(1, 3, '2019-09-16 07:35:56'),
(1, 3, '2019-09-16 07:36:07'),
(1, 3, '2019-09-16 07:36:12'),
(1, 3, '2019-09-16 07:36:15'),
(1, 3, '2019-09-16 09:55:06'),
(1, 3, '2019-09-16 09:55:07'),
(1, 3, '2019-09-16 09:55:08'),
(1, 3, '2019-09-16 09:55:09'),
(1, 3, '2019-09-16 09:55:10'),
(1, 3, '2019-09-16 09:55:11'),
(1, 3, '2019-09-16 13:34:15'),
(1, 3, '2019-09-16 13:41:36'),
(1, 3, '2019-09-17 06:10:12'),
(1, 3, '2019-09-17 06:10:22'),
(1, 3, '2019-09-17 06:10:29'),
(1, 3, '2019-09-17 10:13:35'),
(1, 3, '2019-09-17 10:13:43'),
(1, 3, '2019-09-17 10:13:45'),
(1, 3, '2019-09-17 10:13:51'),
(1, 3, '2019-09-17 10:13:55'),
(1, 3, '2019-09-17 10:13:58'),
(1, 3, '2019-09-17 11:05:37'),
(1, 3, '2019-09-17 11:05:44'),
(1, 3, '2019-09-17 12:30:23'),
(1, 3, '2019-09-17 13:46:00'),
(1, 3, '2019-09-17 13:46:01'),
(1, 3, '2019-09-17 13:46:02'),
(1, 3, '2019-09-17 13:46:03'),
(1, 3, '2019-09-17 13:46:04'),
(1, 3, '2019-09-17 13:46:05'),
(1, 3, '2019-09-17 13:46:06'),
(1, 3, '2019-09-17 13:46:07'),
(1, 3, '2019-09-17 13:46:08'),
(1, 3, '2019-09-17 13:46:09'),
(1, 3, '2019-09-17 13:46:10'),
(1, 3, '2019-09-17 13:46:11'),
(1, 3, '2019-09-17 13:46:13'),
(1, 3, '2019-09-17 13:46:14'),
(1, 3, '2019-09-17 13:46:15'),
(1, 3, '2019-09-17 13:46:16'),
(1, 3, '2019-09-17 14:37:25'),
(1, 3, '2019-09-17 14:37:29'),
(1, 3, '2019-09-17 14:37:30'),
(1, 3, '2019-09-19 07:38:22'),
(1, 3, '2019-09-19 07:38:23'),
(1, 3, '2019-09-19 12:10:56'),
(1, 3, '2019-09-19 12:10:59'),
(1, 3, '2019-09-19 12:11:04'),
(1, 3, '2019-09-19 12:11:06'),
(1, 3, '2019-09-19 12:11:11'),
(1, 3, '2019-09-19 12:11:46'),
(1, 3, '2019-09-19 12:11:49'),
(2, 1, '2019-09-16 10:03:14'),
(2, 1, '2019-09-16 13:46:20'),
(2, 1, '2019-09-16 13:46:23'),
(2, 1, '2019-09-16 13:46:24'),
(2, 1, '2019-09-16 13:47:42'),
(2, 1, '2019-09-16 13:47:43'),
(2, 1, '2019-09-16 14:18:03'),
(2, 1, '2019-09-16 14:18:04'),
(2, 1, '2019-09-16 14:18:05'),
(2, 1, '2019-09-16 14:24:38'),
(2, 1, '2019-09-16 14:24:39'),
(2, 1, '2019-09-16 14:24:40'),
(2, 1, '2019-09-16 14:29:50'),
(2, 1, '2019-09-16 14:29:51'),
(2, 1, '2019-09-16 14:29:52'),
(2, 1, '2019-09-16 14:29:53'),
(2, 1, '2019-09-16 14:29:54'),
(2, 1, '2019-09-16 14:29:55'),
(2, 1, '2019-09-16 14:29:56'),
(2, 1, '2019-09-16 14:29:57'),
(2, 1, '2019-09-16 14:29:58'),
(2, 1, '2019-09-16 14:29:59'),
(2, 1, '2019-09-16 14:30:00'),
(2, 1, '2019-09-16 14:30:01'),
(2, 1, '2019-09-16 14:30:02'),
(2, 1, '2019-09-16 14:30:03'),
(2, 1, '2019-09-16 14:30:04'),
(2, 1, '2019-09-16 14:30:05'),
(2, 1, '2019-09-16 14:30:07'),
(2, 1, '2019-09-16 14:30:08'),
(2, 1, '2019-09-16 14:30:09'),
(2, 1, '2019-09-16 14:30:10'),
(2, 1, '2019-09-16 14:30:11'),
(2, 1, '2019-09-16 14:30:12'),
(2, 1, '2019-09-16 14:30:13'),
(2, 1, '2019-09-16 14:30:14'),
(2, 1, '2019-09-16 14:30:15'),
(2, 1, '2019-09-16 14:32:27'),
(2, 1, '2019-09-16 14:32:28'),
(2, 1, '2019-09-16 14:32:42'),
(2, 1, '2019-09-16 14:32:43'),
(2, 1, '2019-09-16 14:32:44'),
(2, 1, '2019-09-16 14:32:45'),
(2, 1, '2019-09-16 14:33:16'),
(2, 1, '2019-09-16 14:33:58'),
(2, 1, '2019-09-16 14:33:59'),
(2, 1, '2019-09-17 14:38:02'),
(2, 1, '2019-09-17 14:38:04'),
(2, 1, '2019-09-17 14:39:04'),
(2, 1, '2019-09-19 12:24:56'),
(2, 2, '2019-09-16 13:46:20'),
(2, 2, '2019-09-16 14:30:22'),
(2, 2, '2019-09-16 14:30:23'),
(2, 2, '2019-09-16 14:31:34'),
(2, 2, '2019-09-16 14:31:35'),
(2, 2, '2019-09-16 14:32:31'),
(2, 2, '2019-09-16 14:34:00'),
(2, 2, '2019-09-16 14:34:01'),
(2, 2, '2019-09-17 14:38:02'),
(2, 2, '2019-09-17 14:38:05'),
(2, 2, '2019-09-17 14:39:05'),
(2, 2, '2019-09-19 12:24:57'),
(2, 3, '2019-09-16 13:46:20'),
(2, 3, '2019-09-16 14:30:19'),
(2, 3, '2019-09-16 14:30:20'),
(2, 3, '2019-09-16 14:30:21'),
(2, 3, '2019-09-16 14:32:31'),
(2, 3, '2019-09-17 14:38:02'),
(2, 3, '2019-09-17 14:38:05'),
(2, 3, '2019-09-17 14:39:06'),
(2, 3, '2019-09-19 12:24:58');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `categorias`
--

CREATE TABLE `categorias` (
  `id` int(11) NOT NULL,
  `descripcion` varchar(50) NOT NULL,
  `observacion` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `categorias`
--

INSERT INTO `categorias` (`id`, `descripcion`, `observacion`) VALUES
(1, 'MAYOR', 'mayor de 15 años'),
(2, 'JUNIOR', 'menor de 15 años');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `corredores`
--

CREATE TABLE `corredores` (
  `documento` int(11) NOT NULL,
  `nombre` varchar(30) NOT NULL,
  `apellido` varchar(30) NOT NULL,
  `categoria` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `corredores`
--

INSERT INTO `corredores` (`documento`, `nombre`, `apellido`, `categoria`) VALUES
(4157855, 'PEDRO', 'VILLEGAS', 2),
(22145547, 'JUAN', 'PEREZ', 1),
(31376213, 'FEDERICO', 'MICHEL', 1);

-- --------------------------------------------------------

--
-- Estructura Stand-in para la vista `corredores_view`
-- (Véase abajo para la vista actual)
--
CREATE TABLE `corredores_view` (
`documento` int(11)
,`nombre` varchar(30)
,`apellido` varchar(30)
,`categoria` varchar(50)
);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tipo_carreras`
--

CREATE TABLE `tipo_carreras` (
  `id` int(11) NOT NULL,
  `descripcion` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Volcado de datos para la tabla `tipo_carreras`
--

INSERT INTO `tipo_carreras` (`id`, `descripcion`) VALUES
(1, 'CONTRARRELOJ'),
(2, 'HORA Y VUELTA'),
(3, 'PUNTO A PUNTO');

-- --------------------------------------------------------

--
-- Estructura para la vista `carreras_no_finalizadas_view`
--
DROP TABLE IF EXISTS `carreras_no_finalizadas_view`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `carreras_no_finalizadas_view`  AS  select `c`.`id` AS `id`,`c`.`nombre` AS `nombre`,`c`.`id_tipo` AS `id_tipo`,`c`.`fecha` AS `fecha`,`c`.`terminada` AS `terminada`,`tc`.`descripcion` AS `descripcion` from (`carreras` `c` join `tipo_carreras` `tc` on(`c`.`id_tipo` = `tc`.`id`)) where `c`.`terminada` = 0 ;

-- --------------------------------------------------------

--
-- Estructura para la vista `carreras_view`
--
DROP TABLE IF EXISTS `carreras_view`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `carreras_view`  AS  select `c`.`id` AS `id`,`c`.`nombre` AS `nombre`,`c`.`id_tipo` AS `id_tipo`,`c`.`fecha` AS `fecha`,`c`.`terminada` AS `terminada`,`tc`.`descripcion` AS `descripcion` from (`carreras` `c` join `tipo_carreras` `tc` on(`c`.`id_tipo` = `tc`.`id`)) ;

-- --------------------------------------------------------

--
-- Estructura para la vista `carrera_corredor_view`
--
DROP TABLE IF EXISTS `carrera_corredor_view`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `carrera_corredor_view`  AS  select `co`.`documento` AS `documento`,`cc`.`numero` AS `numero`,`co`.`nombre` AS `nombre`,`co`.`apellido` AS `apellido`,`cat`.`descripcion` AS `categoria`,`cc`.`posicion` AS `posicion`,`cc`.`tiempo` AS `tiempo`,`cc`.`vueltas` AS `vueltas`,`cc`.`global` AS `global`,`ca`.`id` AS `id_carrera`,`cat`.`id` AS `id_categoria` from (((`carrera_corredores` `cc` join `corredores` `co` on(`cc`.`id_corredor` = `co`.`documento`)) join `carreras` `ca` on(`cc`.`id_carrera` = `ca`.`id`)) join `categorias` `cat` on(`co`.`categoria` = `cat`.`id`)) order by `cc`.`vueltas` desc,`cc`.`tiempo` ;

-- --------------------------------------------------------

--
-- Estructura para la vista `corredores_view`
--
DROP TABLE IF EXISTS `corredores_view`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `corredores_view`  AS  select `c`.`documento` AS `documento`,`c`.`nombre` AS `nombre`,`c`.`apellido` AS `apellido`,`ca`.`descripcion` AS `categoria` from (`corredores` `c` join `categorias` `ca` on(`c`.`categoria` = `ca`.`id`)) ;

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `carreras`
--
ALTER TABLE `carreras`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id` (`id`);

--
-- Indices de la tabla `carrera_corredores`
--
ALTER TABLE `carrera_corredores`
  ADD PRIMARY KEY (`id_carrera`,`id_corredor`) USING BTREE,
  ADD UNIQUE KEY `unique` (`id_carrera`,`id_corredor`) USING BTREE,
  ADD UNIQUE KEY `numeroIndex` (`id_carrera`,`numero`);

--
-- Indices de la tabla `carrera_marcas`
--
ALTER TABLE `carrera_marcas`
  ADD PRIMARY KEY (`id_carrera`,`numero_corredor`,`marca`),
  ADD UNIQUE KEY `unique` (`id_carrera`,`numero_corredor`,`marca`);

--
-- Indices de la tabla `categorias`
--
ALTER TABLE `categorias`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id` (`id`);

--
-- Indices de la tabla `corredores`
--
ALTER TABLE `corredores`
  ADD PRIMARY KEY (`documento`),
  ADD UNIQUE KEY `documento` (`documento`);

--
-- Indices de la tabla `tipo_carreras`
--
ALTER TABLE `tipo_carreras`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id` (`id`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `carreras`
--
ALTER TABLE `carreras`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT de la tabla `categorias`
--
ALTER TABLE `categorias`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT de la tabla `tipo_carreras`
--
ALTER TABLE `tipo_carreras`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
