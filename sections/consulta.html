<template class="task-template">
  <section id="consulta-section" class="section js-section u-category-native-ui">
    <header class="communication">
      <div class="section-wrapper">
        <h1>
          <img class="section-icon" src="assets/img/programming.png">
          consulta
        </h1>
        <h3>Asegurese que todos los datos son correctos antes de guardar.</h3>
      </div>
    </header>
    <body>
      <!--  <h1>Connecting to MySQL</h1>
      <br>
      <input type="button" id="action-btn" value="Retrieve 10 first rows in the database" />
      <table id="table" border="1">
      <tbody>

    </tbody>
  </table>-->
  <button class="loadButton">Populate Table</button>

  <table id="dataTable" class="display" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th>Date</th>
        <th>Code</th>
        <th>Category</th>
        <th>Hours</th>
        <th>Cost</th>
        <th>Billed</th>
        <th>Description</th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th>Date</th>
        <th>Code</th>
        <th>Category</th>
        <th>Hours</th>
        <th>Cost</th>
        <th>Billed</th>
        <th>Description</th>
      </tr>
    </tfoot>
  </table>
</body>
<script>
  let db = new SQL.Database(),
  table = $("#dataTable").DataTable(),
  sqlstr = `
  CREATE TABLE ProductEntries  (Date text, Code integer, Category text, Hours integer, Cost real, Billed real, Description text);
  INSERT INTO ProductEntries VALUES ('2000-01-01', 1, 'Thing 1', 1, 5, 5, 'Description 1');
  INSERT INTO ProductEntries VALUES ('2000-02-01', 2, 'Thing 2', 2, 5, 10, 'Description 2');
  INSERT INTO ProductEntries VALUES ('2000-03-01', 3, 'Thing 3', 3, 5, 15, 'Description 3');
  `;
  db.run(sqlstr);
  $(".loadButton").on("click", function(e) {
    let res = db.exec("SELECT * FROM ProductEntries");
    table.rows.add(res[0].values).draw();
  });

  /*  var mysql = require('mysql');

  function el(selector) {
  return document.getElementById(selector);
}

el('action-btn').addEventListener('click', function(){
// Get the mysql service
getFirstTenRows(function(rows){
var html = '';

rows.forEach(function(row){
html += '<tr>';
html += '<td>';
html += row.athlete;
html += '</td>';
html += '<td>';
html += row.name;
html += '</td>';
html += '</tr>';
console.log(row);
});

document.querySelector('#table > tbody').innerHTML = html;
});
},false);

function getFirstTenRows(callback){
var mysql = require('mysql');

// Add the credentials to access your database
var connection = mysql.createConnection({
host     : 'localhost',
user     : 'root',
password : null,
database : 'sample_data'
});

// connect to mysql
connection.connect(function(err) {
// in case of error
if(err){
console.log(err.code);
console.log(err.fatal);
}
});

// Perform a query
//$query = 'SELECT JSON_OBJECT('athlete', athlete, 'age', age)  FROM olympic_winners limit 10';
$query = 'SELECT athlete, age FROM `olympic_winners` limit 10';

connection.query($query, function(err, rows, fields) {
if(err){
console.log("An error ocurred performing the query.");
console.log(err);
return;
}

callback(rows);

console.log("Query succesfully executed");
});

// Close the connection
connection.end(function(){
// The connection has been closed
});
}*/
</script>
</html>
